# Minimal overrides for kube-prometheus-stack
# Enables dashboard sidecar to pick up ConfigMaps labeled grafana_dashboard: "1"
# and sets a predictable Grafana admin credential for local demos.
# Optimized for kubeadm clusters with limited resources.

grafana:
  adminUser: admin
  adminPassword: admin
  service:
    type: ClusterIP
    port: 80
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      searchNamespace: ALL
    datasources:
      enabled: true
      defaultDatasourceEnabled: true
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

kube-state-metrics:
  enabled: true
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

prometheus:
  prometheusSpec:
    scrapeInterval: 30s
    podMonitorSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    retention: 24h
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 5Gi

prometheus-node-exporter:
  enabled: true
  hostNetwork: false
  hostPID: false
  hostRootFsMount:
    enabled: false

alertmanager:
  enabled: false

# Prometheus Operator configuration
prometheusOperator:
  manageCrds: true
  enabled: true
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
